<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA</title>
</head>

<style>
  * {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

  }

  body {
    margin: 0px;
    background-color: #f4f8ff;

  }

  .container {
    display: flex;
    padding: 10px;
    margin: 0px;
  }

  .card {
    display: grid;
    border-radius: 8px;
    padding: 12px;
    box-shadow: rgba(36, 42, 66, 0.12) 0px 8px 20px -6px;
    min-width: 250px;
    background-color: #fff;
    gap: 4px;
    height: 120px;
    overflow: hidden;
    opacity: 0.99;
  }

  .title {
    font-size: 14px;
  }

  .subtitle {
    font-size: 12px;
    color: grey
  }

  .item {
    display: flex;
    flex-direction: column;
    padding-bottom: 4px;
    border-bottom: 1px solid #ccc;

  }

  .item:nth-child(3) {
    border-bottom: none;
  }

  @keyframes animate-in {
    0% {
      opacity: 0;
      translate: 0 -20px;
      transform: scale(1.05);
    }

    100% {
      opacity: 1;
      translate: 0 0;
      transform: scale(1);
    }
  }

  /* ::view-transition-new(new-item):only-child {
    animation: animate-in ease-in 0.25s;
  }

  @keyframes animate-out {
    0% {
      opacity: 1;
      translate: 0 0px;
      transform: scale(1.2);
    }

    100% {
      opacity: 0;
      translate: 0 20px;
      transform: scale(1.2);
    }
  } */
</style>

<body>
  <div class="container">
    <div class="card" id="card">
      <div class="item" id="item">
        <span class="title">P5687914563</span>
        <span class="subtitle">Notification</span>
      </div>
      <div class="item">
        <span class="title">P5687914563</span>
        <span class="subtitle">Notification</span>
      </div>
      <div class="item">
        <span class="title">P5687914563</span>
        <span class="subtitle">Notification</span>
      </div>
    </div>
  </div>
  <!-- <div class="item" id="item">
    <span class="title">P5687914563</span>
    <span class="subtitle">Notification</span>
  </div> -->
  <button onclick="handleClick()">click</button>
</body>
<script>

  function handleClick(e) {
    // Fallback for browsers that don't support this API:
    if (!document.startViewTransition) {
      updateTheDOMSomehow();
      return;
    }
    var items = document.getElementsByClassName("item")

    for (var i = 0; i < items.length; i++) {
      items[i].style = "view-transition-name: item-" + i
      items[i].id = "item" + i
    }

    // With a View Transition:
    var trans = document.startViewTransition(() => {
      updateTheDOMSomehow()
    });
    trans.finished.then(() => {

      document.getElementById("item2").remove()
      handleClick()
    })

  }
  function updateTheDOMSomehow() {

    const template = document.getElementById('card');

    document.getElementById("item2").style = "transform: translate-x(-80px);"
    const cardDiv = document.querySelector('.card');
    cardDiv.insertAdjacentHTML('afterbegin', `
      <div class="item" style="view-transition-name: new-item">
        <span class="title">${generateRandomString(10)}</span>
        <span class="subtitle">Notification</span>
      </div>
    `);
  }
  function generateRandomString(length) {
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let result = '';
    const charactersLength = characters.length;
    for (let i = 0; i < length; i++) {
      result += characters.charAt(Math.floor(Math.random() * charactersLength));
    }
    return result;
  }
</script>

</html>